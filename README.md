# LizardGame
### 1. 버튼 위치 변경하기 및 기록 : gameObject.GetCompnent<RectTransform>().localPosition을 이용하여 각각의 버튼의 위치를 왼손잡이용과 오른손 잡이용으로 바꿀 수 있게 하였고, PlayerPrefs를 사용하여 오른손잡이는 0 왼손잡이는 1로 저장하여 저장된 값에 따라 버튼위치를 설정합니다. 따라서 바꾼 위치는 게임종료후 다시 들어와도 변경되지 않게 하였습니다. 그리고 최고기록도 마찬가지로 PlayerPrefs를 사용하여 데이터를 저장해줍니다.
### 2. 화면전환 : 로비화면과 설명서와 같은 경우 하나의 이미지이고 로비화면에서 설정창이나 시작버튼을 누르면 gameObject.SetActive를 이용하여 비활성화 시켜 화면 전환되도록 하였습니다.
### 3. 체력바 : 체력과 같은 경우 일정시간마다 감소하도록 하였고 감소된 값은 fillAmount를 이용하여 체력바가 감소된 값에 맞춰 줄어들도록 하였습니다.
### 4. 이동 : 먼저 플레이어가 이동 할 수 있는 좌표 값을 x값과 y값으로 각각의 list에 넣습니다. 그리고 플레이어는 transform.position을 사용하여 위치를 변경하는데 게임이 시작되면 기본적으로 x값이 x_list에 저장된 값에 따라 증가하면서 오른쪽으로 이동하고 위쪽버튼을 누르면 x값은 고정이 되고, y값은 기존에 y_list에서 참조하고 있던 값에서 다음리스트 값을 참조하면서 위쪽으로 이동합니다. 반대로 아래쪽 버튼을 누르면 이전 리스트 값을 참조하면서 아래쪽으로 이동합니다. 그리고 반대방향으로 못 가게 하기 위해 bool값을 이용하여 위쪽 또는 아래쪽으로 이동중에는 위쪽/아래쪽 버튼을 사용 못 하도록 하였습니다. 
### 5. 꼬리,벽 : 꼬리가 생성되도록 하는 함수로 CreateTail()함수를 만들고 먹이를 먹을 때 마다 하나 씩 생성되도록 하였습니다. 동적으로 생성하기 위해 Hierarchy에 꼬리 이미지를 넣고 Inspector에서 꼬리 특성을 추가하고 Asset에 복사해준 후 Hierarchy에서 삭제해준 뒤 Asset에 저장된 객체를 c#에서 GameObject로 넣어주고 Hierarchy에 동적으로 생성된 꼬리를 넣기 위한 Pool를 따로 만들어 줍니다. 그리고 Instantiata함수를 사용하여 생성된 꼬리를 Pool에 넣어주어 화면에 나오도록 하고 꼬리의 정보도 따로 저장하기 위해 list를 만들어 insert를 사용하여 앞쪽으로 넣어줍니다. 그리고 장애물에 의해 꼬리가 끊어져야 하는 경우 끊어지기 전에 뒤쪽꼬리의 각각의 위치정보를 새로운 리스트에 저장 후 Tag이름을 Tail에서 Wall로 바꾸어 주고 <SpriteRenderer>().sprite를 이용하여 벽의 이미지로 변경해주고 새로운 Pool에 넣어준 뒤 장애물에 충돌한 꼬리를 Destroy함수를 사용하여 삭제해 줍니다.
### 6. 꼬리이동 : 하나의 리스트를 만들어 플레이어가 한 칸 이동할 때 마다 리스트에 insert를 사용하여 앞으로 넣어주고 list의 개수가 100개 이상 넘어가면 RemoveAt(100)으로 뒤쪽으로 삭제하는 queue구조로 만들어준 뒤 꼬리 리스트에 순서대로 값을 주어 꼬리가 순서대로 플레이어가 지나간 경로를 똑같이 따라가도록 하였습니다.
### 7. 아이템 먹기 : 플레이어에 Rigedbody2D(중력 비활성화 시켰습니다)와 Box collider 2D를 주고 아이템에 Box collider 2D를 주어 충돌되도록 하였고, 충돌 시 아이템이 없어지도록 Destroy함수를 사용했습니다. 그리고 충돌되는 잠깐동안 동작이 멈추지 않게 하기위해 Box collider의 Is Trigger을 활성화시켜주었습니다. 
### 8. 레이저, 폭탄 : 레이저와 폭탄은 꼬리와 같은 방식으로 생성되게 하였습니다. 레이저는 게임시작시 생성되고 폭탄은 게임시간이 1분이 지나가면 일정시간마다 2개씩 생성되도록 하였습니다. 각각의 레이저는 게임시간 10초후 랜덤함수를 이용하여 10%확률로 bool값이 true가 되면 Animator에서 Idle모드에서 shot모드에 전환됩니다. shot모드로 전환 시 저장된 애니메이션에 따라 이미지가 변화되는데 레이저가 발사되는 이미지 때에만 플레이어, 꼬리, 벽에 충돌이 되도록 render.sprite.name=”이미지이름”을 사용하였습니다. 폭탄과 같은 경우 생성된 후에 바로 애니메이션이 발생되고 4초후에 폭탄이 삭제되며 폭탄의 위치를 중심으로 3x3범위에 폭발 이미지가 생성되고, 충돌이 되도록 하였습니다. 이후 바로 폭발객체는 모두 삭제됩니다. 
### 9. 유령, 감염 : 유령은 화면 왼쪽 위쪽에 위치 시켜 놓고, SetActive를 false로 두어 비활성화 시켜줍니다. 그리고 게임시간 1분30초가 넘어가면 SetActive를 true로 두어 유령이 나타나게 하고 MoveTowards(현재위치, 이동할 위치, 속도)를 사용하여 플레이어위치에 따라가게 하였습니다. 그리고 속도가 빠르면 플레이어에 바로 충돌할 수 있기 때문에 속도를 낮춰서 유령을 피할 수 있게 하였습니다. 유령이 꼬리와 충돌한 경우 유령의 SetActive를 false로 바꾸고 충돌한 꼬리의 Tag이름와 이미지를 감염에 맞게 바꾸어 줍니다. 그 후 if문을 사용하여 꼬리 리스트의 꼬리 태그이름을 순서대로 확인하다가 Tag이름이 감염이면 일정시간이 지나면 감염된 꼬리 앞쪽 꼬리도 감염되도록 하고 break시켜 if문을 빠져나옵니다. 그리고 유령은 일정시간이 지나면 다시 SetActive를 true로 주고 위치 값을 초기화 시켜 활성화시켜줍니다.
### 10. 게임오버 및 다시하기 : 게임오버함수와 다시하기 함수를 따로 만들어 준 뒤 게임 오버 경우를 if문으로 두어 게임오버함수가 실행되도록 하였습니다. 그리고 다시하기 함수를 통해 게임 오브젝트들을 게임시작전으로 초기화 시켜줍니다. 게임오버시 Time.tirmScale=0을 이용하여 게임을 정지시키며, 나오는 메시지도 SetActive를 통해 활성화되도록 하였습니다. 그리고 동적으로 생성된 객체들을 모두 Destroy로 없애 주고, 리스트도 모두 Clear시켜줍니다.
